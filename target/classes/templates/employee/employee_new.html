<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head th:replace="mataheader :: headfragment">
<link 
	href="https://cdnjs.cloudflare.com/ajax/libs/jquery-datetimepicker/2.5.20/jquery.datetimepicker.css">
</head>
<body>

	<!-- Main Wrapper -->
	<div class="main-wrapper">
		<div th:replace="matatopmenu :: topmenufragment"></div>
		<div th:replace="mataleftmenu :: leftmenu"></div>

		<!-- Page Wrapper -->
		<div class="page-wrapper">

			<!-- Page Content -->
			<div class="content container-fluid">

				<!-- Page Header -->
				<div class="page-header">
					<div class="row align-items-center">
						<div class="col">
							<h3 class="page-heaer">
								<i class="la la-user"> <b><span th:text="${title}"></span></b></i>
							</h3>
							<br>
							<ul class="breadcrumb">
								<li class="breadcrumb-item">Employee</li>
								<li class="breadcrumb-item active"><span th:text="${title}"></span></li>
							</ul>
						</div>

					</div>
				</div>

				<div class="row">
					<div class="col-md-8">
						<div class="card">
							<div class="card-body">
								<form action="#" th:action="@{/employee/add}" enctype="multipart/form-data" th:object="${employee}" method="POST">
									<input type="hidden" th:field="*{id}">
									<input type="hidden" th:field="*{status}">
									<input type="hidden" th:value="${title}" name="title" class="form-control mb-4 col-4">
								<table border="0" cellpadding="10">
									<tr>
									<td><h3><b>Profile:</b></h3></td>
								   </tr>
						   <tr>
								<td>First Name</td>
									<td>
									<input type="text" th:field="*{firstName}" class="form-control" placeholder="Enter First Name"></td>
								<td>Last Name</td>
									<td>
									<input type="text" th:field="*{lastName}" class="form-control" placeholder="Enter Last Name"></td>
									<td>
							</tr>
							  <tr>
								<td>Employee Id<font color="red">*</font></td>
								<td>
								   <p th:if="${#fields.hasErrors('employeeId')}" th:errors="*{employeeId}" class="alert alert-danger"></p>  
							   		<input type="text" th:field="*{employeeId}" class="form-control" placeholder="Enter Employee Id">
								</td>
								<td>Department</td>
									<td>  
									<input type="text" th:field="*{department}" class="form-control" placeholder="Enter Department"></td>
									<td>
							</tr>
							  <tr>
								<td>Function</td>
								<td> 
							   		<input type="text" th:field="*{designation}" class="form-control" placeholder="Enter Function">
								</td>
								<td>Cadre</td>
									<td>
									<input type="text" th:field="*{cadre}"  class="form-control" placeholder="Enter Cadre"></td>
									<td>
							</tr>
							 <tr>
								 <td>Employee Type</td>
								<td> 
							   		<select name="employeeType" th:field="*{employeeType}" class="form-control">
							   		<option value="">Select Employee Type</option>
											<option th:each="employeeType : ${listEmployeeType}"
												th:value="${employeeType.id}" th:text="${employeeType.name}">
									</select>
								</td>
								<td>Pay Grade</td>
								<td> 
							   		<input type="text" th:field="*{payGrade}" class="form-control" placeholder="Enter Cadre">
								</td>
							</tr>
							 <tr>
								<td>Contact No</td>
								<td> 
							   		<input type="text" th:field="*{contactNo}" class="form-control" placeholder="Enter Contact No">
								</td>
								<td>Email Id</td>
									<td>
									<input type="text" th:field="*{emailId}"  class="form-control" placeholder="Enter Email Id"></td>
									<td>
							</tr>
							 <tr>
								<td>Join Date</td>
								<td> 
							   		<input type="date" th:field="*{joinDateStr}" class="form-control">
								</td>
								<td>End Date</td>
									<td>
									<input type="date" th:field="*{endDateStr}" class="form-control">
									<td>
							</tr>
							<tr>
							<td>Card Id</td>
								<td>
									<input type="text" th:field="*{cardId}"  class="form-control" placeholder="Enter Card Id">
								</td>
							<td>Upload Image</td>
						   <td>
						   <input type="file" name="files" id="file" placeholder="choose file"
											class="form-control"onchange="validateSize(this); fileValidation()" accept=".jpg" >
						   </td>
							</tr>
							<tr>
								<td><h3><b>Manager Details:</b></h3></td>
						   </tr>
						    <tr>
								<td>Manager Id</td>
								<td> 
							   		<input type="text" th:field="*{managerId}" class="form-control" placeholder="Enter Manager Emp Id">
								</td>
								<td>Manager Name</td>
									<td>
									<input type="text" th:field="*{managerName}"  class="form-control" placeholder="Enter Manager Name"></td>
									<td>
							</tr>
							 <tr>
								<td>Manager Email</td>
								<td> 
							   		<input type="text" th:field="*{managerEmail}" class="form-control" placeholder="Enter Manager Email">
								</td>
							</tr>
							<tr>
								<td><h3><b>Hostel Details:</b></h3></td>
						   </tr>
						    <tr>
								<td>Hostel Name</td>
								<td> 
							   		<input type="text" th:field="*{hostelName}" class="form-control" placeholder="Enter Hostel Name">
								</td>
								<td>Warden Name</td>
									<td>
									<input type="text" th:field="*{hostelWardenName}"  class="form-control" placeholder="Enter Warden Name"></td>
									<td>
							</tr>
							<tr>
								<td>Warden Email</td>
								<td> 
							   		<input type="email" th:field="*{hostelWardenEmail}" class="form-control" placeholder="Enter Warden Email">
								</td>
								<td>Warden Mobile No</td>
									<td>
									<input type="text" th:field="*{hostelWardenMobile}"  class="form-control" placeholder="Enter Warden Mobile No"></td>
									<td>
							</tr>
							<tr>
								<td><h3><b>Bus Details:</b></h3></td>
						   </tr>
							<tr>
								<td>Bus No</td>
								<td> 
							   		<input type="text" th:field="*{busNo}" class="form-control" placeholder="Enter Bus No">
								</td>
								<td>Nodal Point</td>
									<td>
									<input type="text" th:field="*{nodalPoint}"  class="form-control" placeholder="Enter Nodal Point"></td>
									<td>
							</tr>
							<tr>
							<td>EETO Name</td>
									<td>
									<input type="text" th:field="*{eetoName}"  class="form-control" placeholder="Enter EETO Name"></td>
									<td>
							</tr>
								</table><br><br>	
									<div class="text-right">
									    <button type="submit" class="btn btn-primary">Submit</button>
									    <a class="btn btn-danger" th:href="@{/employee}">Cancel</a>
									</div>
										<div class="form-group">
						            <label><b>Note:<font color="red">*</font></b></label>
						              <ul style="list-style-type:disc;">
										   <li><font color="red">Image Name should be like "EmployeeId.jpg". 
										  e.g "12345.jpg", where 12345 is the Employee Id.</font></li>
										  <li><font color="red">Image size should be more than 10KB and less than 700KB</font></li>
										  <li><font color="red">Image extension should be (.jpg) format.</font></li>
						             </ul> 
						            </div>
								</form><br><br>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<div th:replace="matafooter :: footer"></div>
	<script src="/assets/js/app.js"></script> 
	<script>
	function validateSize(input) {
		  const fileSize = input.files[0].size;
		  if(fileSize < 10240){
			 alert('File size under 10 KB');
		  }
		  if (fileSize > 716800) {
		    alert('File size exceeds 700 KB');
		    // $(file).val(''); //for clearing with Jquery
		  } else {
		    // Proceed further
		  }
		}
		function fileValidation(){
		var fileInput = 
          document.getElementById('file');
        
      var filePath = fileInput.value;
    
      // Allowing file type
      var allowedExtensions = /(\.jpg)$/i;

        
      if (!allowedExtensions.exec(filePath)) {
          alert('File type is not in jpg format');
          fileInput.value = '';
          return false;
      } 
		}
	</script>
</body>
</html>